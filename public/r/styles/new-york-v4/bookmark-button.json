{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "bookmark-button",
  "type": "registry:ui",
  "title": "Bookmark Button",
  "description": "Bookmark Button component",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/new-york-v4/ui/bookmark-button.tsx",
      "type": "registry:ui",
      "target": "components/ui/bookmark-button.tsx",
      "content": "\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { AnimatePresence, motion } from \"motion/react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { useBookmarks } from \"@/hooks/use-bookmarks\"\r\nimport { Button } from \"@/components/ui/core/button\"\r\n\r\ninterface BookmarkButtonProps extends React.ComponentProps<\"div\"> {\r\n  title: string\r\n  href: string\r\n}\r\n\r\nexport function BookmarkButton({ className, title, href }: BookmarkButtonProps) {\r\n  const [shouldAnimate, setShouldAnimate] = useState(false)\r\n  const { isBookmarked, addBookmark, removeBookmark } = useBookmarks()\r\n  const bookmarked = isBookmarked(href)\r\n\r\n  const handleClick = () => {\r\n    if (!bookmarked) {\r\n      setShouldAnimate((prevState) => !prevState)\r\n      addBookmark({ title, href })\r\n      let slug = \"\"\r\n      if (typeof window !== \"undefined\") {\r\n        const parts = window.location.pathname.split(\"/\").filter(Boolean)\r\n        slug = parts[parts.length - 1] || \"\"\r\n        slug = slug.toLowerCase().replace(/[^a-z0-9]/g, \"_\")\r\n      }\r\n      const goalName = `bookmarked_${slug}`.substring(0, 32)\r\n      if (typeof window !== \"undefined\" && window.datafast) {\r\n        window.datafast(goalName)\r\n      }\r\n    } else {\r\n      removeBookmark(href)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (shouldAnimate) {\r\n      const tid = setTimeout(() => {\r\n        setShouldAnimate((prevState) => !prevState)\r\n      }, 520)\r\n\r\n      return () => {\r\n        clearTimeout(tid)\r\n      }\r\n    }\r\n  }, [shouldAnimate])\r\n\r\n  return (\r\n    <Button\r\n      className={cn(\r\n        \"[&_svg]:text-muted-foreground text-fd-secondary-foreground h-8 w-auto justify-start gap-3.5 border bg-transparent px-2 text-xs shadow-none transition-all duration-300 ease-out hover:bg-transparent [&_svg]:!size-3\",\r\n        className\r\n      )}\r\n      onClick={handleClick}\r\n    >\r\n      <div className=\"relative mt-1 h-3 w-3\" tabIndex={-1}>\r\n        <motion.div\r\n          animate={shouldAnimate ? { y: -6, x: -2, rotate: -2 } : {}}\r\n          transition={{\r\n            type: \"spring\",\r\n            stiffness: 800,\r\n            damping: 100,\r\n            duration: 0.5,\r\n          }}\r\n          className=\"absolute bottom-0 left-0 z-[2] flex\"\r\n        >\r\n          <BookmarkIcon active={bookmarked} />\r\n        </motion.div>\r\n        <motion.div\r\n          animate={shouldAnimate ? { y: -8, x: 1, rotate: 2 } : {}}\r\n          transition={{\r\n            type: \"spring\",\r\n            stiffness: 600,\r\n            damping: 100,\r\n            duration: 0.5,\r\n            delay: 0.05,\r\n          }}\r\n          className=\"absolute -right-1.5 bottom-1 z-[1] flex\"\r\n        >\r\n          <BookmarkIcon active={bookmarked} />\r\n        </motion.div>\r\n        <AnimatePresence>{shouldAnimate && <Confetti />}</AnimatePresence>\r\n      </div>\r\n      <motion.span\r\n        layout\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 500,\r\n          damping: 30,\r\n          duration: 0.3,\r\n        }}\r\n      >\r\n        {bookmarked ? \"Bookmarked\" : \"Bookmark\"}\r\n      </motion.span>\r\n    </Button>\r\n  )\r\n}\r\n\r\nconst BookmarkIcon = ({ active }: { active?: boolean }) => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"18\"\r\n    height=\"18\"\r\n    stroke={active ? \"var(--foreground)\" : \"var(--muted-foreground)\"}\r\n    strokeLinecap=\"round\"\r\n    strokeLinejoin=\"round\"\r\n    strokeWidth=\"2.5\"\r\n    viewBox=\"0 0 24 24\"\r\n    fill={active ? \"var(--foreground)\" : \"var(--background)\"}\r\n    style={{\r\n      filter:\r\n        \"drop-shadow(1px 0 0 var(--background)) drop-shadow(-1px 0 0 var(--background)) drop-shadow(0 1px 0 var(--background)) drop-shadow(0 -1px 0 var(--background))\",\r\n    }}\r\n  >\r\n    <path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\" />\r\n  </svg>\r\n)\r\n\r\nconst Confetti = () => {\r\n  const variants = {\r\n    initial: {\r\n      opacity: 0,\r\n      scale: 0,\r\n    },\r\n    animate: (e: { animateX: number; animateY: number; animateRotate?: number }) => {\r\n      return {\r\n        opacity: 1,\r\n        scale: 1,\r\n        x: e.animateX,\r\n        y: e.animateY,\r\n        rotate: e.animateRotate ?? 0,\r\n      }\r\n    },\r\n    exit: (e: { exitX: number; exitY: number; exitRotate?: number }) => {\r\n      return {\r\n        opacity: 0.5,\r\n        scale: 0,\r\n        x: e.exitX,\r\n        y: e.exitY,\r\n        rotate: e.exitRotate ?? 0,\r\n      }\r\n    },\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <motion.div\r\n        variants={variants}\r\n        initial=\"initial\"\r\n        animate=\"animate\"\r\n        exit=\"exit\"\r\n        custom={{\r\n          animateX: 8,\r\n          animateY: -12,\r\n          exitX: 18,\r\n          exitY: -15,\r\n        }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 600,\r\n          damping: 100,\r\n          duration: 0.5,\r\n        }}\r\n        className=\"bg-muted-foreground absolute right-0.5 -bottom-3.5 h-1.5 w-1.5 rounded-full\"\r\n      />\r\n      <motion.div\r\n        variants={variants}\r\n        initial=\"initial\"\r\n        animate=\"animate\"\r\n        exit=\"exit\"\r\n        custom={{\r\n          animateX: 7,\r\n          animateY: -14,\r\n          exitX: 27,\r\n          exitY: -10,\r\n        }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 500,\r\n          damping: 100,\r\n          duration: 0.5,\r\n        }}\r\n        className=\"bg-muted-foreground absolute -right-2.5 -bottom-1 h-2 w-2 rounded-full\"\r\n      />\r\n      <motion.div\r\n        variants={variants}\r\n        initial=\"initial\"\r\n        animate=\"animate\"\r\n        exit=\"exit\"\r\n        custom={{\r\n          animateX: 8,\r\n          animateY: -26,\r\n          exitX: 13,\r\n          exitY: -22,\r\n        }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 800,\r\n          damping: 100,\r\n          duration: 0.5,\r\n        }}\r\n        className=\"bg-muted-foreground absolute top-0 -right-0.5 h-1.5 w-1.5 rounded-full\"\r\n      />\r\n      <motion.div\r\n        variants={variants}\r\n        initial=\"initial\"\r\n        animate=\"animate\"\r\n        exit=\"exit\"\r\n        custom={{\r\n          animateX: -26,\r\n          animateY: -14,\r\n          exitX: -30,\r\n          exitY: -17,\r\n        }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 600,\r\n          damping: 100,\r\n          duration: 0.5,\r\n        }}\r\n        className=\"bg-muted-foreground absolute top-2 left-3 h-1.5 w-1.5 rounded-full\"\r\n      />\r\n      <motion.div\r\n        variants={variants}\r\n        initial=\"initial\"\r\n        animate=\"animate\"\r\n        exit=\"exit\"\r\n        custom={{\r\n          animateX: -12,\r\n          animateY: -22,\r\n          exitX: -16,\r\n          exitY: -17,\r\n          animateRotate: -30,\r\n          exitRotate: -70,\r\n        }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 600,\r\n          damping: 100,\r\n          duration: 0.5,\r\n        }}\r\n        className=\"absolute -top-4 left-0.5 flex\"\r\n      >\r\n        <StarIcon />\r\n      </motion.div>\r\n      <motion.div\r\n        variants={variants}\r\n        initial=\"initial\"\r\n        animate=\"animate\"\r\n        exit=\"exit\"\r\n        custom={{\r\n          animateX: 21,\r\n          animateY: -7,\r\n          exitX: 26,\r\n          exitY: -5,\r\n          animateRotate: 30,\r\n          exitRotate: 70,\r\n        }}\r\n        transition={{\r\n          type: \"spring\",\r\n          stiffness: 600,\r\n          damping: 100,\r\n          duration: 0.5,\r\n        }}\r\n        className=\"absolute -top-2.5 left-2.5 flex\"\r\n      >\r\n        <StarIcon />\r\n      </motion.div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst StarIcon = () => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"12\"\r\n    height=\"12\"\r\n    viewBox=\"0 0 24 24\"\r\n    fill=\"var(--muted-foreground)\"\r\n    strokeWidth=\"2\"\r\n    strokeLinecap=\"round\"\r\n    strokeLinejoin=\"round\"\r\n  >\r\n    <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\" />\r\n  </svg>\r\n)\r\n"
    }
  ]
}