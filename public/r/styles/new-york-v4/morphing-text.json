{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "morphing-text",
  "type": "registry:ui",
  "title": "Morphing Text",
  "description": "Morphing Text component",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/new-york-v4/ui/morphing-text.tsx",
      "type": "registry:ui",
      "target": "components/ui/morphing-text.tsx",
      "content": "\"use client\"\r\n\r\nimport { useCallback, useEffect, useRef } from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst morphTime = 1.5\r\nconst cooldownTime = 0.5\r\n\r\nconst useMorphingText = (texts: string[]) => {\r\n  const textIndexRef = useRef(0)\r\n  const morphRef = useRef(0)\r\n  const cooldownRef = useRef(0)\r\n  const timeRef = useRef(new Date())\r\n\r\n  const text1Ref = useRef<HTMLSpanElement>(null)\r\n  const text2Ref = useRef<HTMLSpanElement>(null)\r\n\r\n  const setStyles = useCallback(\r\n    (fraction: number) => {\r\n      const [current1, current2] = [text1Ref.current, text2Ref.current]\r\n      if (!current1 || !current2) return\r\n\r\n      current2.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`\r\n      current2.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`\r\n\r\n      const invertedFraction = 1 - fraction\r\n      current1.style.filter = `blur(${Math.min(8 / invertedFraction - 8, 100)}px)`\r\n      current1.style.opacity = `${Math.pow(invertedFraction, 0.4) * 100}%`\r\n\r\n      current1.textContent = texts[textIndexRef.current % texts.length]\r\n      current2.textContent = texts[(textIndexRef.current + 1) % texts.length]\r\n    },\r\n    [texts]\r\n  )\r\n\r\n  const doMorph = useCallback(() => {\r\n    morphRef.current -= cooldownRef.current\r\n    cooldownRef.current = 0\r\n\r\n    let fraction = morphRef.current / morphTime\r\n\r\n    if (fraction > 1) {\r\n      cooldownRef.current = cooldownTime\r\n      fraction = 1\r\n    }\r\n\r\n    setStyles(fraction)\r\n\r\n    if (fraction === 1) {\r\n      textIndexRef.current++\r\n    }\r\n  }, [setStyles])\r\n\r\n  const doCooldown = useCallback(() => {\r\n    morphRef.current = 0\r\n    const [current1, current2] = [text1Ref.current, text2Ref.current]\r\n    if (current1 && current2) {\r\n      current2.style.filter = \"none\"\r\n      current2.style.opacity = \"100%\"\r\n      current1.style.filter = \"none\"\r\n      current1.style.opacity = \"0%\"\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    let animationFrameId: number\r\n\r\n    const animate = () => {\r\n      animationFrameId = requestAnimationFrame(animate)\r\n\r\n      const newTime = new Date()\r\n      const dt = (newTime.getTime() - timeRef.current.getTime()) / 1000\r\n      timeRef.current = newTime\r\n\r\n      cooldownRef.current -= dt\r\n\r\n      if (cooldownRef.current <= 0) doMorph()\r\n      else doCooldown()\r\n    }\r\n\r\n    animate()\r\n    return () => {\r\n      cancelAnimationFrame(animationFrameId)\r\n    }\r\n  }, [doMorph, doCooldown])\r\n\r\n  return { text1Ref, text2Ref }\r\n}\r\n\r\ninterface MorphingTextProps {\r\n  className?: string\r\n  texts: string[]\r\n}\r\n\r\nconst Texts: React.FC<Pick<MorphingTextProps, \"texts\">> = ({ texts }) => {\r\n  const { text1Ref, text2Ref } = useMorphingText(texts)\r\n  return (\r\n    <>\r\n      <span className=\"absolute inset-x-0 top-0 m-auto inline-block w-full\" ref={text1Ref} />\r\n      <span className=\"absolute inset-x-0 top-0 m-auto inline-block w-full\" ref={text2Ref} />\r\n    </>\r\n  )\r\n}\r\n\r\nconst SvgFilters: React.FC = () => (\r\n  <svg id=\"filters\" className=\"fixed h-0 w-0\" preserveAspectRatio=\"xMidYMid slice\">\r\n    <defs>\r\n      <filter id=\"threshold\">\r\n        <feColorMatrix\r\n          in=\"SourceGraphic\"\r\n          type=\"matrix\"\r\n          values=\"1 0 0 0 0\r\n                  0 1 0 0 0\r\n                  0 0 1 0 0\r\n                  0 0 0 255 -140\"\r\n        />\r\n      </filter>\r\n    </defs>\r\n  </svg>\r\n)\r\n\r\nexport const MorphingText: React.FC<MorphingTextProps> = ({ texts, className }) => (\r\n  <div\r\n    className={cn(\r\n      \"relative mx-auto h-16 w-full max-w-screen-md text-center leading-none font-bold [filter:url(#threshold)_blur(0.6px)] md:h-24\",\r\n      className\r\n    )}\r\n  >\r\n    <Texts texts={texts} />\r\n    <SvgFilters />\r\n  </div>\r\n)\r\n"
    }
  ]
}